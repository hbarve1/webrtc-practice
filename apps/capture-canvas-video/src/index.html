<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>CaptureCanvasVideo</title>
    <base href="/" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" type="image/x-icon" href="favicon.ico" />

    <style>
      canvas {
        background-color: #ccc;
        --width: calc(45%);
        width: var(--width);
        height: calc(var(--width) * 0.75);
        margin: 1em;
        vertical-align: top;
      }

      video {
        --width: calc(45%);
        width: var(--width);
        height: calc(var(--width) * 0.75);
        margin: 1em;
        object-fit: cover;
      }
    </style>
  </head>
  <body>
    <div id="container">
      <h1>
        <a href="//webrtc.github.io/samples/" title="WebRTC samples homepage"
          >WebRTC samples</a
        >
        <span>Stream from canvas to video element</span>
      </h1>

      <canvas></canvas>

      <video playsinline autoplay muted></video>

      <p>Click and drag on the canvas (on the left) to move the teapot.</p>

      <p>This demo requires Firefox 47 or Chrome 52 (or later).</p>

      <p>
        The teapot is drawn on the canvas element using WebGL. A stream is
        captured from the canvas element using its
        <code>captureStream()</code> method and set as the
        <code>srcObject</code> of the video element.
      </p>

      <p>
        The <code>canvas</code>, <code>video</code>, and
        <code>stream</code> variables are in global scope, so you can inspect
        them from the browser console.
      </p>

      <p>
        For more demos and information about <code>captureStream()</code>, see
        <a
          href="https://docs.google.com/document/d/1JmWfOtUP6ZqsYJ--U8y0OtHkBt-VyjX4N-JqIjb1t78"
          title="Implementation overview doc"
          >Media Capture from Canvas Implementation</a
        >.
      </p>

      <a
        href="https://github.com/webrtc/samples/tree/gh-pages/src/content/capture/canvas-video"
        title="View source for this page on GitHub"
        id="viewSource"
        >View source on GitHub</a
      >
    </div>

    <!-- Teapot code -->
    <script src="https://webrtc.github.io/samples/src/js/third_party/webgl_teapot/webgl-utils.js"></script>
    <script src="https://webrtc.github.io/samples/src/js/third_party/webgl_teapot/webgl-debug.js"></script>
    <script src="https://webrtc.github.io/samples/src/js/third_party/webgl_teapot/matrix4x4.js"></script>
    <script src="https://webrtc.github.io/samples/src/js/third_party/webgl_teapot/cameracontroller.js"></script>
    <script src="https://webrtc.github.io/samples/src/js/third_party/webgl_teapot/teapot-streams.js"></script>
    <script src="https://webrtc.github.io/samples/src/js/third_party/webgl_teapot/demo.js"></script>
  </body>
</html>
