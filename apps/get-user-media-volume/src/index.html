<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>GetUserMediaVolume</title>
    <base href="/" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" type="image/x-icon" href="favicon.ico" />

    <style>
      div#meters > div {
        margin: 0 0 1em 0;
      }

      div#meters div.label {
        display: inline-block;
        font-weight: 400;
        margin: 0 0.5em 0 0;
        width: 3.5em;
      }

      div#meters div.value {
        display: inline-block;
      }

      meter {
        width: 50%;
      }

      meter#clip {
        color: #db4437;
      }

      meter#slow {
        color: #f4b400;
      }

      meter#instant {
        color: #0f9d58;
      }
    </style>
  </head>
  <body>
    <div id="container">
      <h1>
        <a href="//webrtc.github.io/samples/" title="WebRTC samples homepage"
          >WebRTC samples</a
        >
        <span>Audio stream volume</span>
      </h1>

      <p>Measure the volume of a local media stream using WebAudio.</p>

      <div id="meters">
        <div id="instant">
          <div class="label">Instant:</div>
          <meter high="0.25" max="1" value="0"></meter>
          <div class="value"></div>
        </div>
        <div id="slow">
          <div class="label">Slow:</div>
          <meter high="0.25" max="1" value="0"></meter>
          <div class="value"></div>
        </div>
        <div id="clip">
          <div class="label">Clip:</div>
          <meter max="1" value="0"></meter>
          <div class="value"></div>
        </div>
      </div>

      <div>
        <button type="button" id="startButton">Start</button>
        <button type="button" id="stopButton" disabled>Stop</button>
      </div>

      <p>
        The 'instant' volume changes approximately every 50ms; the 'slow' volume
        approximates the average volume over about a second.
      </p>
      <p>
        Note that you will not hear your own voice; use the
        <a href="../audio">local audio rendering demo</a> for that.
      </p>
      <p>
        The <code>audioContext</code>, <code>stream</code> and
        <code>soundMeter</code> variables are in global scope, so you can
        inspect them from the console.
      </p>

      <a
        href="https://github.com/webrtc/samples/tree/gh-pages/src/content/getusermedia/volume"
        title="View source for this page on GitHub"
        id="viewSource"
        >View source on GitHub</a
      >
    </div>
  </body>
</html>
